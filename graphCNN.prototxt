name: "graphCNN"
layers {
    name: "Data"
    top: "data"
    top: "label"
    type: HDF5_DATA
    hdf5_data_param {
        source: "/home/ponu/Documents/PlacesCNN/train.txt"
        batch_size: 64
    }
    include: { phase: TRAIN }
}

layers {
    name: "Data"
    type: HDF5_DATA
    top: "data"
    top: "label"
    hdf5_data_param {
        source: "/home/ponu/Documents/PlacesCNN/test.txt"
        batch_size: 64
    }
    include: {phase: TEST }
}

layers {
	name: "first_fc"
	type: INNER_PRODUCT
	bottom: "data"
	top: "data_fc"
	inner_product_param {
	num_output: 205
	}
}

layers {
	name: "second_fc"
	type: INNER_PRODUCT
	bottom: "data_fc"
	top: "data_fc2"
	inner_product_param {
	num_output: 40
	}
}

layers {
    name: "slicer"
    type: SLICE
    bottom: "data_fc2"
    top: "root_s"
    top: "indoor_s"
    top: "outdoor_s"
    top: "landscape_s"
    top: "sports_s"
    top: "home_s"
    top: "workplace_s"
    top: "store_s"
    top: "industrial_s"
    top: "architecture_s"
    top: "plants_s"
    top: "water_s"
    top: "bedroom_s"
    top: "dining_room_s"
    top: "living_room_s"
    top: "kitchen_s"
    top: "conference_room_s"
    top: "office_s"
    top: "restaurant_s"
    top: "supermarket_s"
    top: "aquarium_s"
    top: "classroom_s"
    top: "church_s"
    top: "bridge_s"
    top: "skyscraper_s"
    top: "amusement_park_s"
    top: "playground_s"
    top: "street_s"
    top: "forest_s"
    top: "garden_s"
    top: "coast_s"
    top: "pond_s"
    top: "river_s"
    top: "swimming_pool_s"
    top: "ocean_s"
    top: "canyon_s"
    top: "desert_s"
    top: "ice_s"
    top: "mountain_s"
    top: "sky_s"
	slice_param {
        axis: 1
        slice_point: 1
        slice_point: 2
        slice_point: 3
        slice_point: 4
        slice_point: 5
        slice_point: 6
        slice_point: 7
        slice_point: 8
        slice_point: 9
        slice_point: 10
        slice_point: 11
        slice_point: 12
        slice_point: 13
        slice_point: 14
        slice_point: 15
        slice_point: 16
        slice_point: 17
        slice_point: 18
        slice_point: 19
        slice_point: 20
        slice_point: 21
        slice_point: 22
        slice_point: 23
        slice_point: 24
        slice_point: 25
        slice_point: 26
        slice_point: 27
        slice_point: 28
        slice_point: 29
        slice_point: 30
        slice_point: 31
        slice_point: 32
        slice_point: 33
        slice_point: 34
        slice_point: 35
        slice_point: 36
        slice_point: 37
        slice_point: 38
        slice_point: 39
	}
}

layers {
    name: "home_con"
    type: CONCAT
    bottom: "bedroom_s"
    bottom: "dining_room_s"
    bottom: "living_room_s"
    bottom: "kitchen_s"
    top: "home_con"
}

layers {
    name: "home_s"
    type: INNER_PRODUCT
    bottom: "home_con"
    top: "home_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "workplace_con"
    type: CONCAT
    bottom: "conference_room_s"
    bottom: "office_s"
    top: "workplace_con"
}

layers {
    name: "workplace_s"
    type: INNER_PRODUCT
    bottom: "workplace_con"
    top: "workplace_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "store_con"
    type: CONCAT
    bottom: "supermarket_s"
    bottom: "restaurant_s"
    top: "store_con"
}

layers {
    name: "store_s"
    type: INNER_PRODUCT
    bottom: "store_con"
    top: "store_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "indoor_con"
    type: CONCAT
    bottom: "home_i"
    bottom: "workplace_i"
    bottom: "store_i"
    bottom: "aquarium_s"
    bottom: "classroom_s"
    top: "indoor_con"
}

layers {
    name: "indoor_s"
    type: INNER_PRODUCT
    bottom: "indoor_con"
    top: "indoor_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "architecture_con"
    type: CONCAT
    bottom: "church_s"
    bottom: "bridge_s"
    bottom: "skyscraper_s"
    bottom: "amusement_park_s"
    bottom: "playground_s"
    bottom: "street_s"
    top: "architecture_con"
}

layers {
    name: "architecture_s"
    type: INNER_PRODUCT
    bottom: "architecture_con"
    top: "architecture_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "plants_con"
    type: CONCAT
    bottom: "forest_s"
    bottom: "garden_s"
    top: "plants_con"
}

layers {
    name: "plants_s"
    type: INNER_PRODUCT
    bottom: "plants_con"
    top: "plants_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "water_con"
    type: CONCAT
    bottom: "coast_s"
    bottom: "pond_s"
    bottom: "river_s"
    bottom: "swimming_pool_s"
    bottom: "ocean_s"
    top: "water_con"
}

layers {
    name: "water_s"
    type: INNER_PRODUCT
    bottom: "water_con"
    top: "water_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "landscape_con"
    type: CONCAT
    bottom: "plants_i"
    bottom: "water_i"
    bottom: "canyon_s"
    bottom: "desert_s"
    bottom: "ice_s"
    bottom: "mountain_s"
    bottom: "sky_s"
    top: "landscape_con"
}

layers {
    name: "landscape_s"
    type: INNER_PRODUCT
    bottom: "landscape_con"
    top: "landscape_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "outdoor_con"
    type: CONCAT
    bottom: "architecture_i"
    bottom: "landscape_i"
    top: "outdoor_con"
}

layers {
    name: "outdoor_s"
    type: INNER_PRODUCT
    bottom: "outdoor_con"
    top: "outdoor_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "root_con"
    type: CONCAT
    bottom: "indoor_i"
    bottom: "industrial_s"
    bottom: "outdoor_i"
    bottom: "sports_s"
    top: "root_con"
}

layers {
    name: "root_s"
    type: INNER_PRODUCT
    bottom: "root_con"
    top: "root_i"
    inner_product_param {
	num_output: 1
    }
}

layers {
    name: "data_con"
    type: CONCAT
    bottom: "root_i"
    bottom: "indoor_i"
    bottom: "outdoor_i"
    bottom: "landscape_i"
    bottom: "sports_s"
    bottom: "home_i"
    bottom: "workplace_i"
    bottom: "store_i"
    bottom: "industrial_s"
    bottom: "architecture_i"
    bottom: "plants_i"
    bottom: "water_i"
    bottom: "bedroom_s"
    bottom: "dining_room_s"
    bottom: "living_room_s"
    bottom: "kitchen_s"
    bottom: "conference_room_s"
    bottom: "office_s"
    bottom: "restaurant_s"
    bottom: "supermarket_s"
    bottom: "aquarium_s"
    bottom: "classroom_s"
    bottom: "church_s"
    bottom: "bridge_s"
    bottom: "skyscraper_s"
    bottom: "amusement_park_s"
    bottom: "playground_s"
    bottom: "street_s"
    bottom: "forest_s"
    bottom: "garden_s"
    bottom: "coast_s"
    bottom: "pond_s"
    bottom: "river_s"
    bottom: "swimming_pool_s"
    bottom: "ocean_s"
    bottom: "canyon_s"
    bottom: "desert_s"
    bottom: "ice_s"
    bottom: "mountain_s"
    bottom: "sky_s"
    top: "data_con"
}
    
layers {
    name: "loss"
    type: EUCLIDEAN_LOSS
    bottom: "data_con"
    bottom: "label"
    top: "loss"
}

layers {
    name: "accuracy"
    type: EUCLIDEAN_LOSS
    bottom: "data_con"
    bottom: "label"
    top: "accuracy"
    include: {phase: TEST}
}

